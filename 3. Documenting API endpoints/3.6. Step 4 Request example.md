# Шаг 4: Пример запроса

| [*Шаг 1. Описание ресурса*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.3.%20Step%201%20Resourse%20description.md) |-->| [*Шаг 2. Конечные точки и методы*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.4.%20Step%202%20Endpoints%20and%20methods.md) |-->| [*Шаг 3. Параметры*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.5.%20Step%203%20Parameters.md) |-->| [**Шаг 4. Пример запроса**](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.6.%20Step%204%20Request%20example.md) |-->| [*Шаг 5. Пример и схема ответа*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.7.%20Step%205%20Response%20example%20and%20schema.md) |

Пример запроса включает в себя запрос с использованием конечной точки, показывающий некоторые настроенные параметры. Пример запроса обычно не показывает все возможные конфигурации параметров, но он должен быть максимально насыщенным параметрами.

Примеры запросов может содержать фрагменты кода, которые показывают один и тот же запрос на разных языках (помимо curl). Запросы, показанные на других языках программирования, являются необязательными (но при их наличии, пользователи приветствуют их).

[Примеры запросов](#examples)

[Множественные примеры запросов](#multiple)

[Запросы на разных языках](#languages)

[Авто генерация примеров кода](#autoGenerate)

[SDK представляют инструменты для API](#sdk)

[API explorer обеспечивает интерактивность с нашими собственными данными](#explorer)

[API Explorer может быть опасным в руках пользователя](#danger)

[Пример запроса для SurfReport](#surfReportRequest)

[Следующие шаги](#nextSteps)

<a name="examples"></a>
## Примеры запросов

Пример ниже показывает пример запроса Callfire API

![callfire](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/14.png?raw=true)

Дизайн этого сайта API задуман таким образом, что  примеры запросов и ответов размещаются в правом столбце страницы. Запрос отформатирован в curl, который мы рассмотрели ранее в разделе [Создание curl запроса](https://github.com/Starkovden/Documenting_APIs/blob/master/2.%20Using%20an%20API%20like%20a%20developer/2.5.%20Make%20a%20curl%20call.md).

    curl -u "username:password" -H "Content-Type:application/json" -X GET "https://api.callfire.com/v2/texts?limit=50&offset=200"


curl - это обычный формат для отображения запросов по нескольким причинам:

- curl не зависит от языка, поэтому он не относится к какому-либо конкретному языку программирования;
- curl показывает информацию заголовка, необходимую в запросе;
- curl показывает метод, используемый в запросе.


В общем, чтобы показать пример запроса, используйте curl. Вот еще один пример запроса curl в Parse API:

![parseAPI](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/15.png?raw=true)

Можно добавить обратную косую черту в curl, чтобы разделить каждый параметр на отдельной строке (хотя, как оговаривалось раньше, в [Windows возникают проблемы с обратной косой чертой](https://github.com/Starkovden/Documenting_APIs/blob/master/2.%20Using%20an%20API%20like%20a%20developer/2.5.%20Make%20a%20curl%20call.md#%D0%BE%D0%B4%D0%B8%D0%BD%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D0%B8-%D0%B4%D0%B2%D0%BE%D0%B9%D0%BD%D1%8B%D0%B5-%D0%BA%D0%B0%D0%B2%D1%8B%D1%87%D0%BA%D0%B8-%D0%B2-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%D1%85-curl-%D0%BD%D0%B0-windows)).


Бывает и так, что сайты документации API могут использовать полный URL-адрес ресурса, например, этот простой пример из Twitter:

![twitter](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/16.png?raw=true)

URL ресурса включает в себя как базовый путь, так и конечную точку. Проблема с отображением полного URL ресурса состоит в том, что он не указывает, нужно ли передавать какую-либо информацию заголовка для авторизации запроса. (Если ваш API состоит только из запросов GET и не требует авторизации, отлично, но только немногие API настроены таким образом.) Запросы curl могут легко отображать любые параметры заголовка.

<a name="multiple"></a>
## Множественные примеры запросов

Если имеется много параметров, можно попробовать включить несколько примеров запросов. В API CityGrid Places конечная точка `where` выглядит следующим образом:

    https://api.citygridmedia.com/content/places/v2/search/where


Однако есть буквально [17 возможных параметров строки запроса](https://docs.citygridmedia.com/display/citygridv2/Places+API#PlacesAPI-WhereSearchRequest), которые можно использовать с этой конечной точкой. В результате документация включает несколько примеров запросов, которые показывают различные комбинации параметров:

![CityGrid Places](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/17.png?raw=true)

Добавление множественных примеров запросов имеет смысл, когда параметры обычно не используются вместе. Например, есть несколько случаев, когда можно фактически включить все 17 параметров в один и тот же запрос, поэтому любой пример будет ограничен в том, что он может показать.

В этом примере показано, как «Найти отели в Бостоне, просматривая результаты с 1 по 5 страницы в алфавитном порядке»:

    https://api.citygridmedia.com/content/places/v2/search/where?what=hotels&where=boston,ma&page=1&rpp=5&sort=alpha&publisher=test&format=json


Если [кликнуть по ссылке](https://api.citygridmedia.com/content/places/v2/search/where?what=hotels&where=boston,ma&page=1&rpp=5&sort=alpha&publisher=test&format=json), вы можете увидеть ответ непосредственно. В следующем разделе есть описание [динамического отображении ответа](), когда пользователь нажимает на запрос.

Сколько разных запросов и ответов нужно показать? Вероятно, это не простой ответ, но, не более, чем несколько. Нам решать, что нужно для нашего API. Пользователи обычно вникнут в шаблон после нескольких примеров.

<a name="languages"></a>
## Запросы на разных языках

Как было сказано ранее в разделе [Что такое REST API?](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/1.8.What%20is%20REST%20API.md) REST API не зависит от языка. Универсальный протокол помогает облегчить широкое распространение для разных языков программирования. Разработчики могут кодировать свои приложения на любом языке, от Java до Ruby, JavaScript, Python, C #, Node JS или каком-либо еще. Пока разработчики могут отправлять HTTP-запросы на своем языке, они могут использовать API. Ответ от веб-запроса будет содержать данные в формате JSON или XML.

Поскольку невозможно знать, на каком языке будут писать конечные пользователи, попытка предоставить примеры кода на каждом языке бесполезна. Многие API просто показывают формат для отправки запросов и пример ответа, и авторы предполагают, что разработчики будут знать, как отправлять HTTP-запросы на своем конкретном языке программирования.


Однако некоторые API отображают простые запросы на разных языках. Вот пример из Twilio:

![twilio](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/18.png?raw=true)

в выпадающем списке можно выбрать, какой язык использовать для примера запроса: C #, curl, Java, Node.js, PHP, Python или Ruby.

Вот еще пример API от Clearbit:

![clearbit](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/19.png?raw=true)

Можно увидеть запрос в Shell (curl), Ruby, Node или Python. Разработчики могут легко скопировать необходимый код в свои приложения, вместо того чтобы выяснить, как заставить запрос curl перевести на определенный язык программирования.

Предоставление различных запросов, подобных этому, часто отображаемых на [вкладках](https://getbootstrap.com/docs/3.3/javascript/#tabs), помогает упростить реализацию  API. Еще лучше, если есть возможность автоматически заполнять ключи API фактическими пользовательскими ключами API на основе их авторизованного профиля.


Но пусть этот шведский стол с примерами кода не пугает вас. Некоторые инструментальные средства API (такие как [Readme.io]() или [SwaggerHub](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.16.%20SwaggerHub%20introduction%20and%20tutorial.md)) могут автоматически генерировать эти примеры кода, поскольку паттерны выполнения запросов REST на разных языках программирования следуют общему шаблону.

> Менеджеры продуктов часто знают, на каких языках программирования целевые пользователи разрабатывают приложения. Если вы знаете предпочитаемый язык программирования целевой аудитории, вы можете сосредоточить свои примеры кода только на этом языке.

<a name="autoGenerate"></a>
## Авто генерация примеров кода

<a name="sdk"></a>
## SDK представляют инструменты для API

<a name="explorer"></a>
## API explorer обеспечивает интерактивность с нашими собственными данными

<a name="danger"></a>
## API Explorer может быть опасным в руках пользователя

<a name="surfReportRequest"></a>
## Пример запроса для SurfReport

<a name="nextSteps"></a>
## Следующие шаги

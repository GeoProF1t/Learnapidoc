# Практические занятия

В разделе собраны все практические занятия всего курса.

## Часть 1 Знакомство с API документацией

### Практическое занятие 1 Идентификация целей

![idea](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/1.jpg?raw=true) **Определение цели документирования API**

Апгрейд документации API, создание портфолио с примерами написания документации API и выполнение всех практик в этом курсе потребуют много времени и усилий. Продумайте цели здесь и убедитесь, что они соответствуют этому курсу.

Ответьте на следующие вопросы:

- Для чего вам этот курс?
- Каковы ваши карьерные амбиции, связанные с документацией API?
- Востребована ли работа технического писателя API документации?
- Что вы считаете метрикой успеха для этого курса?
- У вас есть техническое мышление, необходимое для достижения успеха в области документации для разработчиков?

Для живых семинаров мы обычно делимся ответами в формате, понятном каждому. Но если вы посещаете этот курс онлайн, подумайте о записях своих мыслей в журнале или записи блога.

Подробная информация для этого практического занятия находится по ссылке [1. Обзор курса](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/1.1.%20Course%20Overview.md)

## Часть 2 Использование API в роли разработчика

### Практическое занятие 2.1. Исследуем API OpenWeatherMap

![idea](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/1.jpg?raw=true) **Знакомство с API OpenWeatherMap**

Изучим базовые секции [OpenWeatherMap API](https://openweathermap.org/api/)

- 1 Перейти на страницу [https://openweathermap.org](https://openweathermap.org/)
- 2 перейти в раздел API, кликнув по нему в навигационной панели
- 3 В секции **Current weather data** кликнуть на кнопку `API Doc`

Разобраться в информации, предоставленной в Current weather data API. Запросы API позволяют разработчикам запрашивать информацию для своих приложений. Другими словами, API предоставят данные для приложений, которые разрабатывают разработчики.

- 4 Ответить на вопросы о точках доступа Current weather data API:
 - Предоставляет ли API нужную информацию о температуре, скорости и направлении ветра, и текущих условий (Подсказка: посмотрите на пример ответа API, кликнув по ссылке `Example`)?
 - Какими способами можно указать местоположение для информации о погоде?
 - Как выглядит пример запроса?
 - Сколько точек доступа имеет API?
 - Какие учетные данные нужны для получения ответа?  

Подробная информация для этого практического занятия находится по ссылке [2.1. Сценарий Использования API погоды](https://github.com/Starkovden/Documenting_APIs/blob/master/2.%20Using%20an%20API%20like%20a%20developer/2.1.%20Scenario%20for%20using%20a%20weather%20API.md)

### Практическое занятие 2.2. Получаем ключ авторизации OpenWeatherMap

![](https://i.imgur.com/FADoz6y.jpg) Получаем ключ авторизации OpenWeatherMap

- 1 Перейти на страницу [https://openweathermap.org](https://openweathermap.org/)
- 2 Нажать Sign Up в навигационной панели и создать аккаунт
- 3 После создания аккаунта вернуться на страницу [https://openweathermap.org](https://openweathermap.org/) и кликнуть Sign in
- 4 После входа попадаем в панель разработчика. Кликнуть на плашку `API key`  
- 5 Сохранить сгенерированный ключ в удобном месте

Подробная информация для этого практического занятия находится по ссылке [2.2. Получение ключа авторизации]()

### Практическое занятие 2.3. Создаем запрос в Postman

![](https://i.imgur.com/FADoz6y.jpg) Создаем запросы в Postman

#### Создаем Запрос

Использование инструмента Postman для создания запроса о текущих погодных данных при помощи точки доступа API OpenWeatherMap.

- 1 Если еще не установлен Postman, откройте сайт [https://www.getpostman.com/](https://www.getpostman.com/) и установите приложение
- 2 Запустить приложение
- 3 Выбрать метод GET (обычно выбирается по умолчанию)
- 4 Вставить точку доступа  [https://api.openweathermap.org/data/2.5/weather](https://api.openweathermap.org/data/2.5/weather) в ячейку справа от метода
- 5 Открыть вкладку `Params` под методом и вписать следующие значения:
 - key: `zip` / value: `95050`
 - key: `units` / value: `imperial`
 - key: `appid` / value: `APIKEY`

Вставить в значение ZIP и appid нужный индекс и ключ авторизации API

Интерфейс Postman будет выглядеть так:

![](https://i.imgur.com/tOWdL85.png)

При добавлении параметров они будут отображаются в виде строки запроса к URL-адресу точки доступа в поле GET

В пример точка доступа будет выглядеть так: [https://api.openweathermap.org/data/2.5/weather?zip=95050&units=imperial&appid=8d3f4ca3fe57058a39b58b2a30945699](https://api.openweathermap.org/data/2.5/weather?zip=95050&units=imperial&appid=8d3f4ca3fe57058a39b58b2a30945699) (но с другими значениями API ключа)

Параметры строки запроса отображаются после знака "?" и разделяются между собой амперсандом "&". Порядок параметров в строке запросов значения не имеет.

Многие API передают ключ API в заголовке, а не в качестве параметра строки запроса в URL-адресе запроса. (Если бы это было так, вы бы щелкнули вкладку «Headers» и вставили необходимые пары ключ-значение в заголовок.)

- 6 Кликнуть на кнпоку `Send`

Ответ появится в нижней панели. Пример:

 ![](https://i.imgur.com/KPOcpb1.png)

#### Сохраняем запрос

- 1 В Postman нажать на кнопку `Save` (правее `Send`)
- 2 В диалоговом окне ввести имя запроса, например: "OpenWeatherMap Current API"
- 3 В описании запроса написать краткое описание запроса (опционально), например: "ets the current weather for 95050 in imperial units."
- 4 Проскроллить окно немного вниз и нажать `Create collection` для создания папки, куда будет сохранен запрос. После создания выбрать созданную папку.

После создания папки кнопка `Save` станет активной. Диалоговое окно будет выглядеть примерно так:

![](https://i.imgur.com/rQCRLJc.png)

- 5 Нажать `Save to (имя папки)`

Сохраненные точки доступа будут видны в панели слева в Коллекциях. Если панель "Коллекции" не видна, нажать кнопку `Show/Hide Sidebar` в нижнем левом углу.

#### Создаем запрос на 5-дневный прогноз

Теперь вместо получения текущей погоды,  используем другую конечную точку OpenWeatherMap для получения прогноза. Введите данные в Postman для [5-дневного прогноза](https://openweathermap.org/forecast5). В Postman вы можете щелкнуть новую вкладку или щелкнуть стрелку рядом с «Сохранить» и выбрать «Сохранить как». Затем выберите свою коллекцию и запросите название.


Пример точки доступа для 5-дневного прогноза, который указывает местоположение по почтовому индексу, выглядит следующим образом:

    https://api.openweathermap.org/data/2.5/forecast?zip=95050,us

Добавим в параметры запроса значения API и units

    https://api.openweathermap.org/data/2.5/forecast?zip=95050&appid=APIKEY&units=imperial

В своей ссылке замените `APIKEY` на ключ API

#### Создаем еще один запрос OpenWeatherMap

Сделаем еще один запрос API OpenWeatherMap, на этот раз изменив параметры, которые использовали ранее для указания местоположения (для любой конечной точки). Например, если указвали местоположение по почтовому индексу, изменим его на географические координаты lat и lon.

Например:

    https://api.openweathermap.org/data/2.5/weather?lat=37.3565982&lon=-121.9689848&units=imperial&appid=fd4698c940c6d1da602a70ac34f0b147

Подробная информация для этого практического занятия находится по ссылке [2.3. Отправка запросов через Postman]()

### Практическое занятие 2.4. Создаем запрос в curl

![](https://i.imgur.com/FADoz6y.jpg) Создаем запросы в curl

- 1 Открыть Postman
- 2 В любом запросе кликаем на кнопку `Code` под кнопкой `Save`
- 3 В диалоговом окне "Generate Code Snippets" выбираем cURL из выпадающего списка и нажимаем на кнопку `Copy to Clipboard`

![](https://i.imgur.com/v8zQfAQ.png)

Код Pstman для запроса прогноза погоды OpenWeatherMap выглядит в формате cURL следующим образом:

    curl -X GET \
      'https://api.openweathermap.org/data/2.5/weather?lat=37.3565982&lon=-121.9689848&units=imperial&appid=fd4698c940c6d1da602a70ac34f0b147' \
      -H 'Postman-Token: dcf3c17f-ef3f-4711-85e1-c2d928e1ea1a' \
      -H 'cache-control: no-cache'

Postman добавил свою информацию о хедере (обозначено -Н) Тэги добавленного заголовка можно удалить. Также можно удалить знаки "\", они добавлены для читаемости текста.

Кроме того, обратите внимание, что в Windows вы должны изменить одинарные кавычки на двойные, потому что одинарные кавычки не поддерживаются в терминале Windows по умолчанию.

Вот запрос curl с удаленными символами -H и обратной косой чертой, а одинарные кавычки преобразованы в двойные кавычки:

    curl -X GET "https://api.openweathermap.org/data/2.5/weather?lat=37.3565982&lon=-121.9689848&units=imperial&appid=fd4698c940c6d1da602a70ac34f0b147"

- 4 Curl доступен на MacOS по умолчанию. Если на windows curl еще не установлен, то инструкции по установке по [ссылке](http://www.confusedbycode.com/curl/#downloads), нужно выбрать одно из бесплатных версий с правами Администратора.
- 5 Открываем терминал
 - на OS Windows нажимаем `ctrl+R` и вводим команду `cmd`, Правой кнопкой мыши вызываем меню и выбираем `Paste` для вставки запроса.
 - на MacOS открываем [iTerm](https://www.iterm2.com/) или терминал, нажимая `cmd+Пробел` и вводим команду `Terminal` Вставляем запрос в командную строку и жмем кнопку `Enter`  

Ответ от OpenWeatherMap на наш запрос будет выглядеть так:

    {"coord":{"lon":-121.96,"lat":37.35},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"base":"stations","main":{"temp":65.59,"pressure":1014,"humidity":46,"temp_min":60.8,"temp_max":69.8},"visibility":16093,"wind":{"speed":4.7,"deg":270},"clouds":{"all":20},"dt":1522608960,"sys":{"type":1,"id":479,"message":0.1642,"country":"US","sunrise":1522590719,"sunset":1522636280},"id":420006397,"name":"Santa Clara","cod":200}

Этот запрос минимизирован. Вы можете развернуть его, например на сайте [JSON pretty print](http://jsonprettyprint.com/) или, на MacOS с установленным Python добавив `| python -m json.tool` в конец cURL запроса, чтобы минимизировать JSON в ответе.

Для подробностей можно посмотреть ветку [Stack Overflow](https://stackoverflow.com/questions/352098/how-can-i-pretty-print-json-in-a-shell-script) по этой теме.

- 6 Самостоятельно сделаем curl запрос на 5-дневный прогноз? сохраненный в Postman

Подробная информация для этого практического занятия находится по ссылке [2.5. Создание curl запроса]()

### Практическое занятие 2.5. Создаем AJAX-запрос и проверяем полезную нагрузку  

![](https://i.imgur.com/FADoz6y.jpg) Создаем запрос на странице с помощью AJAX

На этом занятии будем использовать JavaScript для отображения ответа API на веб-странице. Для создания запроса AJAX будем использовать автоматически сгенерированный код jQuery из Postman.

- 1 В текстовом редакторе (например, Sublime Text) создадим новый файл HTML (который содержит основные теги HTML) и вставим в него следующий скрипт :

     ` <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>`

- 2 Сохраняем файл на ПК, назвав **weather.html**
- 3 Открываем Postman и переходим к точке доступа, которую вы настроили в предыдущем действии (см. «Создаем запросы в Postman»).
- 4 Кликаем на кнопку `Code` и выбираем **JavaScript > jQuery AJAX**

![](https://i.imgur.com/uGaJTei.png)

Код AJAX должен выглядеть так:

    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "https://api.openweathermap.org/data/2.5/weather?zip=95050&units=imperial&appid=8d3f4ca3fe57058a39b58b2a30945699",
      "method": "GET",
      "headers": {
    	"cache-control": "no-cache",
    	"Postman-Token": "72cd795c-8600-4f6e-870a-82aa572232e2"
      }
    }

    $.ajax(settings).done(function (response) {
      console.log(response);
    });

- 5 Нажимаем кнопку `Copy to Clipboard` для копирования примера кода
- 6 В том же шаблоне, который начали создавать на шаге 1, добавляем пару тегов `script` `/script` под ссылкой jQuery, а затем вставляем скопированный код Postman в свои тег script.
- 7 В коде jQuery убираем объект `headers`, вставленный Postman

		"headers": {
			"cache-control": "no-cache",
      		"postman-token": "e9be9756-b922-89b3-7109-66bc4cf06b17"
   		}

- 8 Убираем запятую после `"method": "GET"`
- 9 Запускаем Chrome и открываем JavaScript Console перейдя **View > Developer > JavaScript Console.**
- 10 В Chrome перейдите в «Файл»> «Открыть файл» и выберите файл weather.html. (Если вы не видите меню «Файл» в Chrome, нажмите Cmd + O или Ctrl + O или просто перетащите файл weather.html в окно браузера.)

Тело страницы будет пустым, но ответ о погоде должен быть записан в консоли JavaScript (из-за кода console.log (response) в запросе). Если развернуть объект, возвращенный в консоль, он будет выглядеть следующим образом:

![](https://i.imgur.com/K3hSIRe.png)

Теперь эта информация доступна для интеграции на вашей странице.

Подробная информация для этого практического занятия находится по ссылкам [2.9. Проверка JSON из ответов нагрузки]() и [2.10. Доступ и печать определенного значения JSON]()

## Часть 3 Документирование точек доступа API

### Практическое занятие 3.1: Поиск опен-сорс проекта

![](https://i.imgur.com/FADoz6y.jpg) Ищем опен-сорс проект с помощью API документации

Для поиска нужного проекта:

- 1 Открываем [расширенный поиск GitHub](https://github.com/search/advanced)
- 2 Скроллим экран и ищем раздел **Issues Options**. В поле **With the labels** вписываем `help wanted`. Это стандартный тег, который команды используют для привлечения добровольцев в свой проект (но некоторые команды, которым нужна помощь, могут его и не использовать). Скроллим вверх и замечаем, что надпись: «Требуется помощь» автоматически заполняется в поле **Advanced Search**.
- 3 В поле **Advanced Search** добавляем ключевые слова `documentation` и `api` перед тегом `help wanted`  

![](https://i.imgur.com/xyFQ35M.png)

- 4 Нажимаем кнопку `Search` и видим [результат](https://github.com/search?utf8=%E2%9C%93&q=documentation+api+label%3A%22help+wanted%22&type=Issues&ref=advsearch&l=&l=)


В результате вы, возможно, захотите найти проект REST API (а не API нативной библиотеки, такой как Java API). Есть ли проекты, которые выглядят интересными или перспективными? Если так, отлично. Если нет, добавляем ключевые слова и продолжаем искать.

- 5 Если поиск на GitHub не дал подходящих проектов, попробуйте следующие ресурсы:
 - [Trending GitHub projects](https://github.com/trending)
 - [Crowdforge](https://crowdforge.io/)
 - [Up for Grabs](https://up-for-grabs.net/#/)
 - [Bus Factor](https://libraries.io/experiments/bus-factor)
 - [Code Triage](https://www.codetriage.com/)
 - [Changelog](https://changelog.com/)
 - [24-hour Pull Requests](https://24pullrequests.com/)
 - [Programmableweb.com API directory](https://www.programmableweb.com/category/all/apis)

> Примечание. Можно потратить много времени на поиск, оценку и участвие в проекте с открытым исходным кодом. Для этого упражнения хорошо бы сосредоточиться на проекте, который выглядит только слегка интересным. Не обязательно сразу коммититься, это можно сделать в любое время.

- 6 После выбора проекта пометим следующее:
 - Задействован ли REST API в проекте?
 - Как в проекте помечены проблемы, связанные с документацией? Например, используется ли в нем ярлык «документация»?
 - Определяем текущее состояние документации проекта. Является ли она надежной, скудной, обширной, есть она вообще?
 - Насколько активен проект? (Какова частота коммитов?)
 - Сколько участников в проекте?

> Примечание: Вам еще пока не нужно связываться или взаимодействовать с командой. Вы просто собираете информацию и анализируете потребности в документации здесь.

Подробная информация для этого практического занятия находится по ссылке [3.10. Поиск опен-сорс проекта]()

### Практическое занятие 3.2 Оценка документации API ссылок к основным элементам

![](https://i.imgur.com/FADoz6y.jpg) Оценка документации API ссылок к основным элементам

Практическое занятие позволит рассмотреть документацию API ссылок и определить основные элементы. Для оценки документации:

- 1 В списке [Документация 100 API]() выбираем 3 сайта с API документацией
- 2 На каждом сайте ищем секцию документации API ссылок (список точек доступа)
- 3 В документции по каждой ссылке находим информацию:
 - [описание источника]();
 - [точки доступа и методы]()
 - [параметры]();
 - [примеры запроса]()
 - [примеры ответа и схемы]()

(Названия разделов могут отличаться на разных сайтах API-документации, но обычно они легко узнаваемы.)

- 4 Оцените документацию API, ответив на следующие вопросы для каждого раздела:
 - Описание источника
      - явлется ли описание action-oriented?
      - краткое ли резюме (1-3 предложения)?

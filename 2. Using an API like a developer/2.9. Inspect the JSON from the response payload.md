# Изучение JSON из полезной нагрузки ответа

Видеть ответы curl или Postman - это круто, но как использовать данные JSON? В большей части документации API не нужно показывать, как использовать данные JSON. Полагаем, что разработчики будут использовать свои front-end навыки, чтобы анализировать данные и отображать их соответствующим образом в своих приложениях. Чтобы лучше понимать, как разработчики получают доступ к данным, пройдем краткое руководство, как отображать ответ API на веб-странице.

[Практическое занятие: делаем запрос на странице при помощи AJAX](#ajaxRequest)

[Метод AJAX из jQuery](#jquery)

[Логгирование ответов в консоли](#logging)

[Практическое занятие: Изучаем полезную нагрузку](#payload)

<a name="ajaxRequest"></a>
# ![idea](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/1.jpg?raw=true) Практическое занятие: делаем запрос на странице при помощи AJAX

На этом занятии мы будем использовать JavaScript для отображения ответа API на веб-странице. В частности, будем использовать  автоматически сгенерированный код jQuery из Postman для создания запроса AJAX.

1. В текстовом редакторе создаем новый html-файл и вставляем в него шаблон (который содержит основные теги HTML и ссылку на jQuery):

        <html>
        <meta charset="UTF-8">
            <head>
                <title>Sample page</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
            </head>
        <body>
            <h1>Sample page</h2>

        </body>
    </html>

2. сохраняем файл с именем **weather.html**

3. Открываем Postman и переходим к конечной точке "Текущие данные погоды", которую мы сконфигурировали ранее в [Отправке запросов в Postman](https://github.com/Starkovden/Documenting_APIs/blob/master/2.%20Using%20an%20API%20like%20a%20developer/2.3.%20Submit%20requests%20through%20Postman.md)

4. Нажимаем на ссылку `Code` (под кнопкой `Save`) и выбираем **JavaScript > jQuery AJAX**

![ajax](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/7.png?raw=true)

Код AJAX должен выглядеть так:

    var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://api.openweathermap.org/data/2.5/weather?zip=95050&appid=fd4698c940c6d1da602a70ac34f0b147&units=imperial",
        "method": "GET",
        "headers": {
            "cache-control": "no-cache",
            "postman-token": "e9be9756-b922-89b3-7109-66bc4cf06b17"
        }
    }

    $.ajax(settings).done(function (response) {
        console.log(response);
    });

5. Нажимаем на `Copy to clipboard` чтобы скопировать пример кода.

6. В примере кода, который написали в первом пункте добавляем пару `<script></script>` под ссылкой jQuery и вставляем между этими тегами код, полученный в Postman.

7. В коде jQuery удаляем объект `headers`, который вставил Postman:

        "headers": {
            "cache-control": "no-cache",
            "postman-token": "e9be9756-b922-89b3-7109-66bc4cf06b17"
        }   

8. Также удалим точку после метода GET `"method": "GET"` .

Финальный код должен выглядеть так:

        <html>
            <meta charset="UTF-8">
            <head>
                <title>Sample page</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
                <script>
                    var settings = {
                        "async": true,
                        "crossDomain": true,
                        "url": "http://api.openweathermap.org/data/2.5/weather?zip=95050,us&appid=fd4698c940c6d1da602a70ac34f0b147&units=imperial",
                        "method": "GET"

                    }

                    $.ajax(settings).done(function (response) {
                        console.log(response);
                    });
                </script>
            </head>
            <body>
                <h2>Sample page</h2>

            </body>
        </html>

> Файл можно посмотреть по адресу [ idratherbewriting.com/learnapidoc/assets/files/weather-plain.html](https://idratherbewriting.com/learnapidoc/assets/files/weather-plain.html) Там же добавлены инструкции, как открыть консоль разработчика, потому что в противном случае отображение страницы на этом этапе в учебнике будет полностью пустым.

9. Открываем **Chrome**, кликаем правой кнопкой мыши и нажимаем `view code` в правой верхней части переходим на вкладку `console` и раскрываем `Object`

10. В Chrome переходим в «Файл»> «Открыть файл» и выберите файл weather.html. (Если вы не видите меню «Файл» в Chrome, нажмите Cmd + O или Ctrl + O или просто перетащите файл weather.html в окно браузера.)

Тело страницы будет пустым, но ответ о погоде должен быть записан в консоли JavaScript (из-за кода console.log (response) в запросе). Если развернуть объект, возвращенный в консоль, он будет выглядеть следующим образом:

![Console](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/8.png?raw=true)

Теперь эта информация доступна для интеграции на вашей странице.






















<a name="jquery"></a>
# Метод AJAX из jQuery

<a name="logging"></a>
# Логгирование ответов в консоли

<a name="payload"></a>
# ![idea](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/1.jpg?raw=true) Практическое занятие: Изучаем полезную нагрузку

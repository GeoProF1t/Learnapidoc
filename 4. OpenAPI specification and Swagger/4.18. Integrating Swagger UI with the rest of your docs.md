# Интеграция Swagger с собственной документацией


Всякий раз, когда обсуждаются Swagger и другие спецификации REST API, технические писатели неизменно спрашивают, как они могут интегрировать выходные данные Swagger с остальной частью своей документации. Когда речь идет о Swagger, этот вопрос обсуждается среди технических писателей гораздо чаще других.

#### Содержание раздела

[Единственный источник истины](#truth)

[Вариант 1. Встраиваем Swagger UI в свои документы](#embed)

[Вариант 2: Помещаем всю информацию в спецификацию в сворачиваемых разделах](#put)

[Вариант 3: Парсим (анализируем) документ в спецификации OpenAPI](#parse)

[Вариант 4. Храним содержимое в YAML формате](#yaml)

[Вариант 5: Используем инструмент, импортирующий Swagger и позволяющий работать с другой документацией](#multitool)

[Вариант 6: Меняем перспективы - наличие двух сайтов не так уж плохо](#breake)

[Следующие шаги](#nextSteps)

<a name="truth"></a>
## Единственный источник истины

Когда мы помещаем документацию в другой исходный файл - в данном случае в файл YAML или JSON, включенный в набор файлов Swagger UI, в конечном итоге разбиваем свой единственный источник истины на несколько источников. Конечные точки и параметры уже определены в обычной документации, и теперь их нужно перенести в спецификацию OpenAPI . Вы копируете и вставляете одинаковые параметры и другую информацию на обоих сайтах? Вы как-то генерируете описания из одного и того же источника?

Эта головоломка обычно кристально ясна для технических авторов. Документация API состоит не только из адресного материала об API. Также имеется информация о получении ключей API, установке и настройке сервисов, или другие сведения, которые не соответствуют спецификации. Все это будем рассматривать в разделе [Безадресные разделы](https://github.com/Starkovden/Documenting_APIs/tree/master/6.%20Non-reference%20API%20topics#%D0%B1%D0%B5%D0%B7%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%BD%D1%8B%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D1%8B). Безадресными разделами считают следующие:

- [Обзор API](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.1.%20User%20guide%20topics.md)
- [Начало работы](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.3.%20Getting%20started%20tutorial.md)
- [Требования к аутентификации и авторизации](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.4.%20Authentification%20and%20authorization.md)
- [Коды статусов и ошибок](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.5.%20Status%20and%20error%20codes.md)
- [Ограничения и пороги](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.6.%20Rate%20limiting%20and%20thresholds.md)
- [Примеры кода](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.7.%20Code%20samples%20and%20tutorials.md)
- [SDK и примеры приложений](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.8.%20SDKs%20and%20sample%20apps.md)
- [Глоссарий](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.10.%20API%20Glossary.md)
- [Лучшие практики API](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.11.%20API%20best%20practices.md)

Бывает, имеется больше данных, которые нужно сообщить пользователю, но которые не вписываются в спецификацию. Например, в конечной точке `weather` в [примере API OpenWeatherMap](https://idratherbewriting.com/learnapidoc/assets/files/swagger/), который мы использовали в этом курсе, есть некоторые подробности об идентификаторах городов, которые требуют некоторого объяснения.

    },
    "id": 420006397,
    "name": "Santa Clara",
    "cod": 200
    }

Что означает `"cod": 200`? Если перейти в раздел [«Идентификатор города» в документации OpenWeatherMap](https://openweathermap.org/current#cityid), увидим ссылку для загрузки списка кодов городов файлов.

Может быть сложной задачей добавить описания всех параметров, выделенных в спецификации OpenAPI, если таких данных очень много в адресных разделах документации. К сожалению, простого решения для создания единого источника истины не существует . Вот несколько вариантов:

- [Вариант 1. Встроить Swagger UI в свои документы](#embed)
- [Вариант 2: Поместить всю информацию в спецификацию в сворачиваемых разделах](#put)
- [Вариант 3: Парсить документ в спецификации OpenAPI](#parse)
- [Вариант 4. Хранить содержимое в YAML формате](#yaml)
- [Вариант 5: Использовать инструмент, импортирующий Swagger и позволяющий работать с другой документацией](#multitool)
- [Вариант 6: изменить перспективы - наличие двух сайтов не так уж плохо](#breake)

<a name="embed"></a>
## Вариант 1. Встраиваем Swagger UI в свои документы

Одним из решений является внедрение Swagger UI непосредственно в документацию. Пример этого здесь: [Swagger UI Demo](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.15.%20Swagger%20Ui%20demo.md). Вставить Swagger в HTML-страницу довольно легко. Последняя версия Swagger имеет более отзывчивый, гибкий дизайн. Так и просится быть встроенным в другой сайт.


Единственная проблема с вариантом встраивания состоит в том, что некоторые из моделей не ограничены в своем контейнере, поэтому они расширяются за пределы контейнера. Попробуйте расширить раздел «Модель» в демоверсии - будет понятно, о чем речь.


Может быть джедай стилей и смог бы изменить такое поведение. Возможно, но падаван, который не силен в стилях, не может решить такую проблему. В [Swagger UI Demo](https://idratherbewriting.com/learnapidoc/pubapis_swagger_demo.html) добавлены несколько пользовательских стилей, для внесения изменений в интерфейс Swagger в разных местах. Если просмотреть исходный код этой страницы и изучить второй блок `<style>`, можно увидеть добавленные стили.

Благодаря встроенному параметру все равно можно использовать официальный инструментарий Swagger UI для чтения спецификации, и включать вывод Swagger UI в основную документацию. Swagger UI читает последнюю версию спецификации OpenAPI, которую многие инструменты еще не поддерживают. Кроме того, интерфейс Swagger имеет знакомый интерфейс, с которым разработчики API, уже знакомы. Но, если стилистика уродливым образом пересекается в разделах модели, можно не использовать  подхода встраивания документации .


<a name="put"></a>
## Вариант 2: Помещаем всю информацию в спецификацию в сворачиваемых разделах

<a name="parse"></a>
## Вариант 3: Парсим (анализируем) документ в спецификации OpenAPI

<a name="yaml"></a>
## Вариант 4. Храним содержимое в YAML формате

<a name="multitool"></a>
## Вариант 5: Используем инструмент, импортирующий Swagger и позволяющий работать с другой документацией

<a name="breake"></a>
## Вариант 6: Меняем перспективы - наличие двух сайтов не так уж плохо

<a name="nextSteps"></a>
## Следующие шаги

# Знакомство со спецификациями OpenAPI и Swagger

[OpenAPI](https://www.openapis.org/) является спецификацией для описания REST API. Можно рассматривать спецификацию OpenAPI как спецификацию DITA. В DITA существуют определенные элементы XML, используемые для определения компонентов справки, а также требуемый порядок и иерархия для этих элементов. Различные инструменты могут читать DITA и создавать веб-сайт документации на основе информации.

В OpenAPI вместо XML существует набор объектов JSON с определенной схемой, которая определяет их наименование, порядок и содержимое. Этот файл JSON (часто выражается в YAML вместо JSON) описывает каждую часть API. Описывая API в стандартном формате, инструменты публикации могут программно анализировать информацию об API и отображать каждый компонент в стилизованном интерактивном виде.

> Если есть желание сразу перейти к пошаговому справочнику по созданию документации в спецификации OpenAPI, см. [Обзор руководства OpenAPI](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.4.%20OpenAPI%20tutorial%20overview.md).

[Взгляд на спецификацию OpenAPI](#glancing)

[Проверка спецификации](#validating)

[Автоматическая генерация файла OpenAPI из аннотаций кода](#fileGenerate)

[Подход: разработка по спецификации](#specFirst)

[Роль технического писателя в спецификации](#role)

[Визуализация спецификации OpenAPI с помощью Swagger UI](#rendering)

[Практическое занятие: Исследуем API PetStore в Swagger UI](#petStore)

[Другие инструменты визуализации](#otherTools)

[Кастомизация Swagger UI](#customize)

[Недостатки OpenAPI и Swagger UI](#downsides)

[Некоторые утешения](#consolations)

[Ресурсы для дальнейшего чтения](#reading)

<a name="glancing"></a>
## Взгляд на спецификацию OpenAPI

Чтобы лучше понять спецификацию OpenAPI, давайте взглянем на некоторые выдержки из спецификации. Углубимся в каждый элемент в следующих разделах.

Официальное описание спецификации OpenAPI доступно в [репозитории Github](https://github.com/OAI/OpenAPI-Specification). Элементы OpenAPI - это `paths`, `parameters`, `responses` и `security`. Каждый из этих элементов является объектом JSON, который содержит свойства и массивы.

В спецификации OpenAPI ваши конечные точки это `paths`. Конечная точка `/pet`, в спецификации OpenAPI может выглядеть следующим образом:

    paths:
        /pets:
            get:
                summary: List all pets
                operationId: listPets
                tags:
                    - pets
                parameters:
                    - name: limit
                    in: query
                    description: How many items to return at one time (max 100)
                    required: false
                    schema:
                        type: integer
                        format: int32
                responses:
                    '200':
                    description: An paged array of pets
                    headers:
                        x-next:
                            description: A link to the next page of responses
                            schema:
                                type: string
                    content:
                        application/json:    
                            schema:
                                $ref: "#/components/schemas/Pets"
                default:
                    description: unexpected error
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/Error"

Это формат YAML, взят из [Swagger PetStore](http://petstore.swagger.io/)

Вот что значат объекты в этом коде:

- `/pets` - конечна точка path;
- `get` - HTTP метод;
- `parameters` - список параметров конечной точки;
- `responses` - список ответов на запрос
- `200` - HTTP код статуса
- `$ref` является ссылкой на другую часть реализации, где определяется ответ (в `components`). OpenAPI имеет много `$ref` ссылок, подобных этой, чтобы сохранить код в чистоте и облегчить его повторное использование.

> Может потребоваться некоторое время, чтобы понять спецификацию OpenAPI. Возьмем пару недель и несколько примеров спецификации, чтобы посмотреть, особенно в контексте фактического API. Спецификация OpenAPI достаточно общая, чтобы описать почти каждый API REST, поэтому некоторые части могут быть более применимыми, чем другие.

<a name="validating"></a>
## Проверка спецификации

<a name="fileGenerate"></a>
## Автоматическая генерация файла OpenAPI из аннотаций кода

<a name="specFirst"></a>
## Подход: разработка по спецификации

<a name="role"></a>
## Роль технического писателя в спецификации

<a name="rendering"></a>
## Визуализация спецификации OpenAPI с помощью Swagger UI

<a name="petStore"></a>
## Практическое занятие: Исследуем API PetStore в Swagger UI

<a name="otherTools"></a>
## Другие инструменты визуализации

<a name="customize"></a>
## Кастомизация Swagger UI

<a name="downsides"></a>
## Недостатки OpenAPI и Swagger UI

<a name="consolations"></a>
## Некоторые утешения

<a name="reading"></a>
## Ресурсы для дальнейшего чтения

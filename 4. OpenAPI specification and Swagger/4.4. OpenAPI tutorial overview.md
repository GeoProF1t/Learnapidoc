# Обзор руководства OpenAPI 3.0

В этом разделе мы углубимся в спецификацию OpenAPI. Мы будем использовать тот же [API-интерфейс OpenWeatherMap](https://openweathermap.org/current), который мы использовали в других частях этого курса, в качестве контента для нашего документа OpenAPI. Используя этот API, мы создадим действительный документ спецификации OpenAPI, а затем изобразим его в интерактивной документации используя Swagger UI.

[Общие ресурсы для изучения спецификации OpenAPI](#general)

[Чем отличается руководство по OpenAPI/Swagger Тома Джонсона](#tutorialDiff)

[Терминология Swagger и OpenAPI](#terminology)

[Начнем с просмотра большой картины](#bigPicture)

[Учебник OpenAPI шаг за шагом](#follow)

[Миграция от OpenAPI 2.0 к 3.0](#migration)

[Полезные источники](#resources)

<a name="general"></a>
## Общие ресурсы для изучения спецификации OpenAPI](#)

Изучение [спецификации OPenAPI](https://github.com/OAI/OpenAPI-Specification) займет какое-то время. В качестве оценки планируйте около двух недель погружения, работая с конкретным API в контексте спецификации, прежде чем освоиться с ним. По мере изучения спецификации OpenAPI используйте следующие ресурсы:

- [Образцы документов спецификации OpenAPI](https://github.com/OAI/OpenAPI-Specification/tree/master/examples/v3.0). Эти образцы документов спецификации являются хорошей отправной точкой в ​​качестве основы для документации спецификации. Они дают общее представление об общей форме документа спецификации.
- [Руководство пользователя Swagger](https://swagger.io/docs/specification/about/). Руководство пользователя Swagger дружелюбное, концептуальное и легкое для понимания. В нем нет детализации и точности документации по спецификации на GitHub, но во многих отношениях она более понятна и содержит больше примеров.
- [Документация по спецификации OpenAPI](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md). Техническая документация является технической и требует некоторого привыкания, но мы, несомненно, будем часто к ней обращаться при описании своего API. Это длинный одностраничный документ, искать можно с помощью `Ctrl+F`.

> В Интернете есть другие учебные пособия по Swagger / OpenAPI, но обязательно следуйте [учебным пособиям для версии 3.0 API](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md), а не [2.0](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md). Версия 3.0 была [выпущена в июле 2017 года](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#appendix-a-revision-history). 3.0 существенно отличается от 2.0. ([Версия 3.0.2](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md) была выпущена в декабре 2017 года и внесла незначительные улучшения в версию 3.0. Обратите внимание, что всякий раз, при ссылке на 3.0, имеется в виду 3.x, что означает любой инкрементный выпуск точек из строки 3.0.)

<a name="tutorialDiff"></a>
## Чем отличается руководство по OpenAPI/Swagger Тома Джонсона

Можно найти много учебных пособий по Swagger онлайн. В чем отличие этого руководства? Помимо сквозного пошагового руководства, использующего версию спецификации OpenAPI 3.0 (а не 2.0), и фактического API для контекста, здесь показано, как поля OpenAPI отображаются в пользовательском интерфейсе Swagger. В частности, демонстрируется, как и где каждое из полей OpenAPI отображается в Swagger UI.

Конечно, многие другие фрэймворки могут анализировать и отображать информацию в документе спецификации OpenAPI, но [Swagger UI](https://github.com/swagger-api/swagger-ui) является одним из самых популярных. Swagger UI спонсируется SmartBear, той же компанией, которая активно инвестирует в [инициативу OpenAPI](https://www.openapis.org/) и разрабатывает [Swaggerhub](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.16.%20SwaggerHub%20introduction%20and%20tutorial.md). Их Инструментарий почти всегда синхронизирован с новейшими разработками. Swagger UI - активно разработанный и управляемый опен-сорс проект.

Показывая, как поля в спецификации отображаются в пользовательском интерфейсе Swagger, Том Джонсон надеется, что объекты и свойства спецификации приобретут большую актуальность и значение. Отображение пользовательского интерфейса Swagger - это всего лишь *одна из возможностей* визуального отображения информации о спецификации.

<a name="terminology"></a>
## Терминология Swagger и OpenAPI

Прежде чем продолжить, уточним некоторые термины для тех, кто может быть незнаком с OpenAPI/Swagger:

- [Swagger](https://swagger.io/) был оригинальным названием спецификации OpenAPI, но позже спецификация была изменена на [OpenAPI](https://github.com/OAI/OpenAPI-Specification/), чтобы усилить открытую, непатентованную природу этого стандарта. Теперь «Swagger» относится к инструментам API, которые поддерживают спецификацию OpenAPI, а не к самой спецификации. Люди по-прежнему часто ссылаются на оба имени взаимозаменяемо, но «OpenAPI» - это то, как следует обращаться к спецификации.
- [Smartbear](https://smartbear.com/) - это компания, которая поддерживает и разрабатывает инструменты Swagger с открытым исходным кодом (Swagger Editor, Swagger UI, Swagger Codegen и другие). Они не владеют [спецификацией OpenAPI](https://github.com/OAI/OpenAPI-Specification/), так как Linux Foundation поддерживает эту [инициативу](https://www.openapis.org/). Разработка спецификации OpenAPI ведется [многими компаниями и организациями](https://www.openapis.org/membership/members).
- «Документ спецификации OpenAPI» или «документ OpenAPI» - это Swagger-файл в формате YAML, который создается для описания API.

Другие определения находятся в [Глоссарии API](https://github.com/Starkovden/Documenting_APIs/blob/master/10.%20API%20glossary%20and%20Resourses/10.1.%20Glossary%20for%20API%20documentation.md)

Разберемся с некоторыми дополнительными дескрипторами JSON и YAML. Документ спецификации в моем руководстве по OpenAPI использует YAML (который вкратце представлен [здесь](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.3.%20Working%20in%20YAML.md)), но он также может быть создан и в JSON. JSON - это подмножество YAML, поэтому эти два формата являются практически взаимозаменяемыми (для структур данных, которые мы используем). В конечном счете, однако, спецификация OpenAPI является объектом JSON. Примечания к спецификации:

> Документ OpenAPI, который соответствует Спецификации OpenAPI, сам по себе является объектом JSON, который может быть представлен в формате JSON или YAML. (См. [Format](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#format))

Другими словами, созданный документ OpenAPI является объектом JSON, но у нас есть возможность выразить JSON с использованием синтаксиса JSON или YAML. YAML более читабелен и является более распространенным форматом (см. Обсуждение API Handyman [JSON против YAML](https://apihandyman.io/writing-openapi-swagger-specification-tutorial-part-1-introduction/#json-vs-yaml)), поэтому YAML используется только здесь. Документация спецификации OpenAPI на GitHub всегда показывает синтаксис JSON и YAML при отображении форматов спецификации. (Для более подробного сравнения YAML с JSON см. «Отношение к JSON» в [спецификации YAML](https://yaml.org/spec/1.2/spec.html).)

YAML относится к структурам данных с тремя основными терминами: маппинг (отображения) (хэши / словари), последовательности (массивы / списки) и скаляры (строки / числа)» (см. «Введение» в [YAML 1.2](https://yaml.org/spec/1.2/spec.html)). Однако, поскольку спецификация OpenAPI является объектом JSON, он использует терминологию JSON - например, «объекты», «массивы», «свойства», «поля» и так далее. Поэтому содержимое будет показываться в формате YAML, но описываться будет с помощью терминологии JSON.

Каждый уровень в YAML (определенный отступом в два пробела) является объектом. В следующем коде `california` является объектом. `animal`, `flower` и `bird`  являются свойствами объекта `california`.

    california:
      animal: Grizzly Bear
      flower: Poppy
      bird: Quail

В JSON это выглядит так:

{
"california": {
"animal": "Grizzly Bear",
"flower": "Poppy",
"bird": "Quail"
}
}



<a name="bigPicture"></a>
## Начнем с просмотра большой картины

<a name="follow"></a>
## Учебник OpenAPI шаг за шагом

<a name="migration"></a>
## Миграция от OpenAPI 2.0 к 3.0

<a name="resources"></a>
## Полезные источники

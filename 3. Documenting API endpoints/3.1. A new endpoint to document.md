# Документирование новой конечной точки


До этого момента мы выступали в роли разработчика с задачей интеграции данных о погоде на свой сайт. Цель состояла в том, чтобы понять, какая информация нужна разработчикам и как они используют API.

Теперь сменим роль. Теперь у нас роль технического писателя, работающего в команде OpenWeatherMap. Команда просит задокументировать новую конечную точку. Что будем писать, какой поход применим?

[Нужно документировать новую конечную точку](#newDoc)

[wiki-страница с информацией о новой конечной точке](#wikiPage)

[Следующие шаги](#nextStep)

<a name="newDoc"></a>
## Нужно документировать новую конечную точку

Менеджер проекта вызывает и говорит, что у команды есть новая конечная точка, которую нужно документировать к следующему релизу. (Иногда команды называют каждую конечную точку «API».)

«Вот вики-страница, которая содержит информацию о новом API», - говорит менеджер. вся информация разбросана в случайном порядке.

Большинство технических писателей не начинают с нуля документацию проекта. Инженеры обычно помещают важную информацию на внутреннюю вики (или передают информацию во время встреч). Однако информация на вики-странице, скорее всего, будет неполной и излишне технической в ​​некоторых местах (например, описание схемы базы данных или высокоуровневых архитектурных рабочих процессов). Информация может также включать в себя только внутреннюю информацию (например, тестовые логины, протоколы доступа или кодовые имена) или содержать давно устаревшие разделы.

В конечном счете, информация будет ориентирована на других инженеров того же уровня знаний, что и инженеры команды. Работа технического писателя заключается в том, чтобы взять эту информацию и превратить ее в полную, точную, полезную информацию, которая сообщается аудитории.

<a name="wikiPage"></a>
## wiki-страница с информацией о новой конечной точке

Теперь наша задача отсортировать информацию на той фиктивной вики-странице и создать из нее документацию. Можно прочитать макет вики-страницы ниже, чтобы получить представление об информации. В следующих разделах мы будем знакомиться с каждой секцией API.

Вот мок внутренней вики-страницы:

### The wiki page: "Surf Report API"

The new endpoint is `/surfreport/{beachId}`. This endpoint is for surfers who want to check things like tide and wave conditions to determine whether they should head out to the beach to surf. `{beachId}` is retrieved from a list of beaches on our site.

Optional parameters:

- Number of days: Max is 7. Default is 3. Optional.
- Units: imperial or metric. With imperial, you get feet and knots. With metric, you get centimeters and kilometers per hour. Optional.
- Time: time of the day corresponding to time zone of the beach you're inquiring about. Format is unix time, aka epoch. Unix time is the milliseconds since 1970. Time zone is GMT or UTC. Optional.

If you include the hour, then you only get back the surf condition for the hour you specified. Otherwise, you get back 3 days, with conditions listed out by hour for each day.

The response will include the surf height, the wind, temp, the tide, and overall recommendation.

Sample endpoint with parameters:

    https://api.openweathermap.org/com/surfreport/123?&days=2&units=metrics&hour=1400    

The response contains these elements:

surfreport:

- surfheight (units: feet)
- wind (units: kts)
- tide (units: feet)
- water temperature (units: F degrees)
- recommendation - string ("Go surfing!", "Surfing conditions okay, not great", "Not today -- try some other activity.")

The recommendation is based on an algorithm that takes optimal surfing conditions, scores them in a rubric, and includes one of three responses.

Sample format:

    {
        "surfreport": [
            {
                "beach": "Santa Cruz",
                "monday": {
                    "1pm": {
                        "tide": 5,
                        "wind": 15,
                        "watertemp": 60,
                        "surfheight": 5,
                        "recommendation": "Go surfing!"
                    },
                    "2pm": {
                        "tide": -1,
                        "wind": 1,
                        "watertemp": 50,
                        "surfheight": 3,
                        "recommendation": "Surfing conditions are okay, not great"
                    }
                    ...

                }
            }
        ]
    }

Negative numbers in the tide represent incoming tide.

The report won't include any details about riptide conditions.

Although users can enter beach names, there are only certain beaches included in the report. Users can look to see which beaches are available from our website at [http://example.com/surfreport/beaches_available](http://example.com/surfreport/beaches_available). The beach names must be url encoded when passed in the endpoint as query strings.

To switch from feet to metrics, users can add a query string of `&units=metrics`. Default is `&units=imperial`.

Here's an [example](https://www.surfline.com/surf-report/south-beach-ca/5842041f4e65fad6a77089c0) of how developers might integrate this information.

If the query is malformed, you get error code 400 and an indication of the error.

Как видно, что информация здесь не структурирована и ее трудно читать. Путем разделения информации API на пять стандартных разделов информация приобретет лучшую форму и станет более читабельной.

<a name="nextStep"></a>
## Следующие шаги

Давайте перейдем к [Обзору пошагового описания API](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.2.%20API%20reference%20tutorial%20overview.md)  для обзора пяти шагов, которые мы рассмотрим при создании раздела адресного API для этой новой конечной точки.

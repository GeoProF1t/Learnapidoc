# шаг 3 Параметры

| [*Шаг 1. Описание ресурса*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.3.%20Step%201%20Resourse%20description.md) |-->| [*Шаг 2. Конечные точки и методы*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.4.%20Step%202%20Endpoints%20and%20methods.md) |-->| [**Шаг 3. Параметры**](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.5.%20Step%203%20Parameters.md) |-->| [*Шаг 4. Пример запроса*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.6.%20Step%204%20Request%20example.md)|-->| [*Шаг 5. Пример и схема ответа*](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/3.7.%20Step%205%20Response%20example%20and%20schema.md) |

Параметрами являются опции, которые можно передать конечной точке (например, указать формат ответа или возвращаемую сумму), чтобы повлиять на ответ. Существует четыре типа параметров:

- параметры заголовка,
- параметры пути,
- параметры строки запроса,
- параметры тела запроса.

Различные типы параметров часто документируются в отдельных группах на одной странице. Не все конечные точки могут содержать каждый тип параметра.

[Примеры параметров](#paramExample)

[Четыре типа параметров](#paramTypes)

[Что следует отметить в документировании параметров](#whattoNote)

[Типы данных параметров](#dataTypes)

[Максимальное и минимальное значения параметров](#maxMin)

[Параметры заголовка](#headersParam)

[Параметры пути](#pathParam)

[Цветовая кодировка параметра пути](#colorCode)

[Параметры строки запроса](#queryParam)

[Параметры тела запроса](#bodyParam)

[Документирование параметров тела сложного запроса](#complexRequest)

[Подход Swagger к параметрам тела запроса](#swaggerApproach)

[Параметры конечной точки SurfReport](#surfParam)

[Следующие шаги](#nextSteps)

<a name="paramExample"></a>
## Примеры параметров

Скриншот ниже является примером раздела параметров с Box API:

![boxApiParam](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/9.png?raw=true)

*Пример параметра BOX API*

В этом примере параметры сгруппированы по типу:

- параметры пути,
- параметры запроса,
- параметры тела.

Конечная точка также выделяет параметр пути `collab_id` распознаваемым образом в определении конечной точки.


Часто параметры просто перечислены в таблице или списке определений, как в этом примере:

| Параметр | Обязательно/Опционально | Тип данных |
|:--:|:--:|:--:|
| format | Optional | String |

Вот пример документации API Yelp
![search API](https://github.com/Starkovden/Documenting_APIs/blob/master/3.%20Documenting%20API%20endpoints/pics/10.png?raw=true)

Можно форматировать значения различными способами, кроме таблицы. При использовании списка определений или другого не табличного формата, обязательно нужно разработать стили, которые сделают значения легко читаемыми.

<a name="paramTypes"></a>
## Четыре типа параметров

REST API обладают 4 типами параметров:

- **Параметры заголовка**: параметры, включенные в заголовок запроса, обычно относятся к авторизации.
- **Параметры пути**: Параметры в пределах пути конечной точки перед строкой запроса, отделяются знаком `?`. Обычно эти параметры выделяются фигурными скобками.
- **Параметры строки запроса**: Параметры в строке запроса конечной точки, располагаются после знака `?`.
- **Параметры тела запроса**: Параметры, включенные в тело запроса. Обычно в формате JSON.

> Термины для каждого из этих типов параметров взяты из [спецификации OpenAPI](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.4.%20OpenAPI%20tutorial%20overview.md), которая определяет формальную спецификацию, которая включает описания каждого типа параметра (см. [Шаг 4: Объект `paths`](https://github.com/Starkovden/Documenting_APIs/blob/master/4.%20OpenAPI%20specification%20and%20Swagger/4.8.%20Step%204%20The%20paths%20object.md)). Использование терминологии промышленного стандарта поможет разработать словарь элементов API для их описания.

<a name="whattoNote"></a>
## Что следует отметить в документировании параметров

Независимо от типа параметра, определите следующее для каждого параметра:

[Типы данных параметров](#dataTypes)

[Максимальное и минимальное значения параметров](#maxMin)

<a name="dataTypes"></a>
### Типы данных параметров

API могут некорректно обрабатывать параметр, если он имеет неправильный тип данных или неправильный формат. Перечисление типа данных является хорошей идеей для всех типов параметров, но особенно важно для параметров тела запроса, поскольку они обычно форматируются в JSON.

Вот типы данных наиболее распространенные в REST API:
- **string**: буквенно-цифровая последовательность букв и / или цифр;
- **integer**: целое число - может быть положительным или отрицательным;
- **boolean**: true или false значение;
- **object**: пара ключ-значение в формате JSON
- **array**: массив значений

> В программировании намного больше типов данных, и если имеются более конкретные типы данных, которые важно отметить, обязательно нужно их документировать. Например, в Java важно отметить допустимый тип данных, поскольку Java выделяет пространство памяти в зависимости от размера данных. Таким образом, Java получает гораздо более конкретную информацию о размере чисел. Есть byre, short, int, double, long, float, char, boolean и так далее. Однако, обычно, в REST API такой уровень детализации не нужно указывать.

<a name="maxMin"></a>
### Максимальное и минимальное значения параметров

Помимо указания типа данных, параметры должны указывать максимальные, минимальные и допустимые значения. Например, если API сервиса погоды допускает только координаты долготы и широты конкретных стран, эти ограничения должны быть описаны в документации в разделе параметров.

Пропуск информации о максимальных / минимальных значениях или других недопустимых значениях является распространенной ошибкой в ​​документации. Разработчики часто не осознают всех «творческих» способов, которыми пользователи могут использовать API. Команда тестирования или обеспечения качества (QA), вероятно, является лучшим ресурсом для определения значений, которые не должны допускаться, потому что задача QA - попытаться взломать API.

> При тестировании API, можно попробовать запустить конечную точку без обязательных параметров, либо с неправильными параметрами, либо со значениями, которые превышают максимальные или минимальные значения. Изучить ответ об ошибке, который  возвращается. Включить этот ответ в раздел [статусы и коды ошибок](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.5.%20Status%20and%20error%20codes.md). О важности тестирования узнаем больше в разделе [тестирование документации](https://github.com/Starkovden/Documenting_APIs/tree/master/5.%20Testing%20API%20documentaion).

<a name="headersParam"></a>
## Параметры заголовка

Параметры заголовка включаются в заголовок запроса. Обычно заголовок включает в себя только параметры авторизации, которые являются общими для всех конечных точек; в результате параметры заголовка обычно не документируются для каждой конечной точке. Детали авторизации в параметрах заголовка документированы в разделе [Аутентификация и авторизация](https://github.com/Starkovden/Documenting_APIs/blob/master/6.%20Non-reference%20API%20topics/6.4.%20Authentification%20and%20authorization.md).


Однако, если ваша конечная точка требует, чтобы в заголовке передавались уникальные параметры, вы должны документировать их в документации по параметрам в каждой конечной точке.

<a name="pathParam"></a>
## Параметры пути

Параметры пути являются частью конечной точки. Например, в следующей конечной точке `{user}` и `{bikeId}` являются обязательными параметрами пути:

    /service/myresource/user/{user}/bicycles/{bicycleId}


Параметры пути обычно устанавливаются с помощью фигурных скобок. Но в некоторых API документациях стили  прописывают перед значением двоеточие или используют вообще иной синтаксис. При документировании параметров пути указываются значения по умолчанию, допустимые значения и другие сведения.

<a name="colorCode"></a>
### Цветовая кодировка параметра пути

При перечислении параметров пути в конечной точке, может помочь цветовое кодирование параметров, для их легкой идентификации. Цветовое выделение параметров дает понять, что является параметром пути, а что нет. Посредством цвета мы создаем непосредственную связь между конечной точкой и определениями параметров.

Например, если выделить цветом параметры `{user}` и `{bicycleId}` в конечной точке:

    /service/myresource/user/{user}/bicycles/{bicycleId}


То позже можно использовать этот же цвет при описании этих же параметров.

| Параметр URL | Описание параметра |
|:--|:--|
| `user` | Описание параметра user |
| `bicycleId` | Описание параметра bicycleId |

Использование цвета для выделения параметров позволяет легко выделить определяемый параметр и его связь с определением конечной точки.

<a name="queryParam"></a>
## Параметры строки запроса

Параметры строки запроса указываются после знака вопроса `?` В конечной точке. Знак вопроса, параметры, которые следуют за ним и их значения, называется «строкой запроса». В строке запроса каждый параметр перечисляется один за другим с амперсандом `&`, разделяющим их. Порядок параметров строки запроса не имеет значения.

Эта строка запроса:

    /surfreport/{beachId}?days=3&units=metric&time=1400

или эта

    /surfreport/{beachId}?time=1400&units=metric&days=3

вернут один и тот же результат.

Однако в параметрах пути порядок имеет значение. Если параметр является частью фактической конечной точки (не добавляется после строки запроса), это значение обычно описывается в описании самой конечной точки.

<a name="bodyParam"></a>
## Параметры тела запроса





<a name="complexRequest"></a>
### Документирование параметров тела сложного запроса

<a name="swaggerApproach"></a>
### Подход Swagger к параметрам тела запроса

<a name="surfParam"></a>
## Параметры конечной точки SurfReport

<a name="nextSteps"></a>
## Следующие шаги
